<IfModule mod_ssl.c> 
    <VirtualHost *:443>
        ServerAdmin webmaster@localhost
        ServerName localhost
        
        DocumentRoot /var/www/html
        <Directory /var/www/html>
	        AllowOverride All
            Options FollowSymLinks
            Options Indexes FollowSymLinks MultiViews
        </Directory>

        LogLevel warn
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        SSLEngine on

        SSLCertificateFile /etc/apache2/ssl_keys/apache_webserver.crt
        SSLCertificateKeyFile /etc/apache2/ssl_keys/apache_webserver.key
        SSLVerifyClient require
        SSLVerifyDepth 10
        SSLCACertificateFile /usr/local/share/ca-certificates/CA.crt
        
        # SSLProtocol -ALL +SSLv3 +TLSv1 +TLSv1.1 +TLSv1.2
        # SSLCipherSuite ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:!RC4:HIGH:!MD5:!aNULL:!EDH
        # SSLHonorCipherOrder on
        # SSLCompression off

        Header add Strict-Transport-Security: max-age=15768000 ; includeSubDomains
    </VirtualHost>

    <VirtualHost *:80>
        ServerName localhost

        RewriteEngine on
        RewriteCond %{HTTPS} !=on
        RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R=301,L]
    </VirtualHost>
</IfModule>